
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>写出好的 Commit Message - Shooter's Blog</title>
  <meta name="author" content="shooter">

  
  <meta name="description" content="为什幺要关注提交信息 加快 Reviewing Code 的过程
帮助我们写好 release note
5年后帮你快速想起来某个分支，tag 或者 commit 增加了什么功能，改变了哪些代码
让其他的开发者在运行 git blame 的时候想跪谢
总之一个好的提交信息， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://shooterman.github.io/blog/2013/11/22/5-useful-tips-for-a-better-commit-message">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Shooter's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-33680426-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Shooter's Blog</a></h1>
  
    <h2>御风而行 世而誉之而不加劝 世而非之而不加沮</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:shooterman.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">写出好的 Commit Message</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-22T16:39:16+08:00" pubdate data-updated="true">2013-11-22</time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://shooterman.github.io">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><h2>为什幺要关注提交信息</h2>

<ul>
<li>加快 Reviewing Code 的过程</li>
<li>帮助我们写好 release note</li>
<li>5年后帮你快速想起来某个分支，tag 或者 commit 增加了什么功能，改变了哪些代码</li>
<li>让其他的开发者在运行 <code>git blame</code> 的时候想跪谢</li>
<li>总之一个好的提交信息，会帮助你提高项目的整体质量</li>
</ul>


<h2>基本要求</h2>

<ul>
<li>第一行应该少于50个字。 <strong>随后是一个空行</strong> 第一行题目也可以写成：<code>Fix issue #8976</code></li>
<li>喜欢用 vim 的哥们把下面这行代码加入 <em>.vimrc</em> 文件中，来检查拼写和自动折行</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>autocmd Filetype gitcommit setlocal spell textwidth=72</span></code></pre></td></tr></table></div></figure>


<ul>
<li>永远不在 <code>git commit</code> 上增加 <code>-m &lt;msg&gt;</code> 或 <code>--message=&lt;msg&gt;</code> 参数，而单独写提交信息</li>
</ul>


<p>一个不好的例子 <code>git commit -m "Fix login bug"</code></p>

<p>一个推荐的 commit message 应该是这样：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Redirect user to the requested page after login
</span><span class='line'>
</span><span class='line'>https://trello.com/path/to/relevant/card
</span><span class='line'>
</span><span class='line'>Users were being redirected to the home page after login, which is less
</span><span class='line'>useful than redirecting to the page they had originally requested before
</span><span class='line'>being redirected to the login form.
</span><span class='line'>
</span><span class='line'>* Store requested path in a session variable
</span><span class='line'>* Redirect to the stored location after successfully logging in the user</span></code></pre></td></tr></table></div></figure>


<ul>
<li>注释最好包含一个连接指向你们项目的 issue/story/card。一个完整的连接比一个 issue numbers 更好</li>
<li>提交信息中包含一个简短的故事，能让别人更容易理解你的项目</li>
</ul>


<h2>注释要回答如下信息</h2>

<p><strong>为什么这次修改是必要的？</strong></p>

<p>要告诉 Reviewers，你的提交包含什么改变。让他们更容易审核代码和忽略无关的改变。</p>

<p><strong>如何解决的问题？</strong></p>

<p>这可不是说技术细节。看下面的两个例子：</p>

<p><code>Introduce a red/black tree to increase search speed</code></p>

<p><code>Remove &lt;troublesome gem X&gt;, which was causing &lt;specific description of issue introduced by gem&gt;</code></p>

<p>如果你的修改特别明显，就可以忽略这个。</p>

<p><strong>这些变化可能影响哪些地方？</strong></p>

<p>这是你最需要回答的问题。因为它会帮你你发现在某个 branch 或 commit 中的做了过多的改动。一个提交尽量只做1，2个变化。</p>

<p>你的团队应该有一个自己的行为规则，规定每个 commit 和 branch 最多能含有多少个功能修改。</p>

<h2>小提示</h2>

<ul>
<li>使用 <em>fix</em>, <em>add</em>, <em>change</em> 而不是 <em>fixed</em>, <em>added</em>, <em>changed</em></li>
<li>永远别忘了第2行是空行</li>
<li>用 <em>Line break</em> 来分割提交信息，让它在某些软件里面更容易读</li>
</ul>


<h2>例子</h2>

<pre><code>Fix bug where user can't signup.

[Bug #2873942]

Users were unable to register if they hadn't visited the plans
and pricing page because we expected that tracking
information to exist for the logs we create after a user
signs up.  I fixed this by adding a check to the logger
to ensure that if that information was not available
we weren't trying to write it.
</code></pre>

<br/>


<pre><code>Redirect user to the requested page after login

https://trello.com/path/to/relevant/card

Users were being redirected to the home page after login, which is less
useful than redirecting to the page they had originally requested before
being redirected to the login form.

* Store requested path in a session variable
* Redirect to the stored location after successfully logging in the user
</code></pre>

<h2>延伸阅读</h2>

<ul>
<li><a href="http://web-design-weekly.com/blog/2013/09/01/a-better-git-commit/">A Note About Git Commit Messages</a></li>
<li><a href="http://ablogaboutcode.com/2011/03/23/proper-git-commit-messages-and-an-elegant-git-history/">Writing good commit messages</a></li>
<li><a href="https://github.com/erlang/otp/wiki/Writing-good-commit-messages">Proper Git Commit Messages and an Elegant Git History</a></li>
<li><a href="http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html">A Better Git Commit</a></li>
<li><a href="http://robots.thoughtbot.com/5-useful-tips-for-a-better-commit-message">5 Useful Tips For A Better Commit Message </a></li>
<li><a href="http://whatthecommit.com/">好玩的提交信息</a></li>
</ul>


<hr />

<h2>出处</h2>

<p>文章由 <strong>Victor</strong> 翻译，并发表在<a href="http://ruby-china.org/topics/15737">ruby-china</a>上。
本人只是伸手党</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">shooter</span></span>

      








  


<time datetime="2013-11-22T16:39:16+08:00" pubdate data-updated="true">2013-11-22</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/git/'>git</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/11/08/resque-for-rails/" title="Previous Post: rails使用队列resque">&laquo; rails使用队列resque</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/01/12/2013-summary/" title="Next Post: 2013年年终总结">2013年年终总结 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/01/12/2013-summary/">2013年年终总结</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/22/5-useful-tips-for-a-better-commit-message/">写出好的 Commit Message</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/08/resque-for-rails/">Rails使用队列resque</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/06/whenever/">在rails中创建定时任务</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/03/centos-offline-install-ruby-environment/">CentOS 5.6 离线安装Ruby环境及配置项目</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/shooterman">@shooterman</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'shooterman',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - shooter -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'blackbean';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://shooterman.github.io/blog/2013/11/22/5-useful-tips-for-a-better-commit-message/';
        var disqus_url = 'http://shooterman.github.io/blog/2013/11/22/5-useful-tips-for-a-better-commit-message/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
